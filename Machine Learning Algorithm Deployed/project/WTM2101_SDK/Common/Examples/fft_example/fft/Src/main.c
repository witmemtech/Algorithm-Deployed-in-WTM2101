/**
  ******************************************************************************
  * @file    main.c 
  * @brief   This example describes how to calculate the data with FFT
  * @date    2023-02-07
  * Copyright (c) 2023 Witmem Technology Co., Ltd
  * All rights reserved.
  *
  ******************************************************************************
  */

#include "main.h"

uint32_t ifft_wdata[512] = {
    0x000000ff, 0x00000000, 0xfffffffd, 0x00000051, 0xffffffff, 0x00000029, 0xfffffffc, 0x0000001c, 0xfffffffe, 0x00000014, 0xfffffffe, 0x00000010, 0xffffffff, 0x0000000f, 0xfffffffe, 0x0000000c, 0x00000000, 0x0000000a, 0xffffffff, 0x00000009, 0xfffffffe, 0x0000000a, 0xffffffff, 0x00000009, 0xfffffffe, 0x00000008, 0xffffffff, 0x00000007, 0xffffffff, 0x00000007, 0xffffffff, 0x00000007, 0xffffffff, 0x00000005, 0xffffffff, 0x00000007, 0xfffffffe, 0x00000006, 0x00000000, 0x00000006, 0x00000000, 0x00000006, 0x00000000, 0x00000006, 0x00000000, 0x00000006, 0x00000000, 0x00000006, 0x00000000, 0x00000004, 0x00000000, 0x00000004, 0x00000000, 0x00000004, 0x00000000, 0x00000004, 0x00000000, 0x00000004, 0x00000000, 0x00000004, 0x00000000, 0x00000004, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0xffffffff, 0x00000004, 0xffffffff, 0x00000004, 0x00000000, 0x00000004, 0x00000001, 0x00000003, 0x00000001, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0xffffffff, 0x00000003, 0x00000000, 0x00000003, 0x00000000, 0x00000003, 0x00000000, 0x00000003, 0x00000000, 0x00000003, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000001, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000001, 0x00000000, 0x00000002, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0xffffffff, 0x00000002, 0x00000000, 0x00000001, 0xffffffff, 0x00000002, 0xffffffff, 0x00000002, 0xffffffff, 0x00000002, 0x00000000, 0x00000001, 0xffffffff, 0x00000002, 0xffffffff, 0x00000002, 0xffffffff, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000002, 0x00000000, 0x00000002, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0xffffffff, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0xffffffff, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0xffffffff, 0x00000001, 0xffffffff, 0x00000001, 0xffffffff, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0xffffffff, 0x00000000, 0x00000000, 0x00000000, 0xffffffff, 0x00000000, 0xffffffff, 0x00000000, 0xffffffff, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000
};

uint32_t ifft_odata[512] = {
    0x93, 0xffffff4f, 0xffffff61, 0xffffff7c, 0xffffffd7, 0xffffff9b, 0xffffffaa, 0xffffffea, 0xffffffc9, 0xffffffc7, 0xffffffdf, 0xfffffff3, 0xffffffed, 0xffffffc8, 0xffffffe9, 0xffffffe0, 0x1f, 0x16, 0x43, 0x63, 0x11, 0x2c, 0x3, 0xfffffff5, 0x1d, 0x1a, 0x25, 0x1d, 0x6, 0xfffffff5, 0x20, 0x17, 0x17, 0x1d, 0xfffffff5, 0x15, 0xc, 0x2f, 0x4c, 0x1c, 0x44, 0x40, 0x26, 0x3c, 0x27, 0x15, 0x21, 0x22, 0x2c, 0x38, 0x38, 0x2c, 0x3c, 0x3f, 0x29, 0x45, 0x35, 0x3d, 0x3b, 0x2e, 0x2e, 0x23, 0x1b, 0x41, 0x4d, 0x4a, 0x65, 0x5c, 0x61, 0x65, 0x66, 0x5a, 0x54, 0x44, 0x3c, 0x4c, 0x3d, 0x41, 0x4e, 0x54, 0x5e, 0x5e, 0x67, 0x74, 0x5d, 0x73, 0x6e, 0x5b, 0x46, 0x49, 0x4e, 0x42, 0x5a, 0x52, 0x57, 0x60, 0x62, 0x71, 0x68, 0x5f, 0x67, 0x5f, 0x61, 0x67, 0x5e, 0x62, 0x5e, 0x67, 0x6d, 0x77, 0x67, 0x72, 0x7a, 0x73, 0x79, 0x7b, 0x66, 0x5e, 0x6c, 0x64, 0x7b, 0x76, 0x7b, 0x81, 0x7e, 0x87, 0x7e, 0x90, 0x8f, 0x87, 0x95, 0x8e, 0x86, 0x85, 0x9f, 0x9c, 0x90, 0xa0, 0x92, 0x8a, 0x8f, 0x99, 0x8f, 0x90, 0x87, 0x86, 0x92, 0x88, 0x9e, 0x9b, 0x98, 0x9b, 0x96, 0x9d, 0x93, 0x90, 0xa8, 0xa1, 0x94, 0xa1, 0x93, 0x85, 0x99, 0xa0, 0xa0, 0xa2, 0xab, 0xad, 0x9c, 0xa6, 0xa8, 0x9c, 0xab, 0xb3, 0xb9, 0xb0, 0xb0, 0xae, 0xae, 0xb4, 0xb7, 0xbd, 0xb1, 0xad, 0xbc, 0xbc, 0xbe, 0xbe, 0xc6, 0xbb, 0xb8, 0xd0, 0xbe, 0xbe, 0xc8, 0xc9, 0xc3, 0xc4, 0xcc, 0xc8, 0xc4, 0xcb, 0xd2, 0xcf, 0xcc, 0xd4, 0xd8, 0xca, 0xca, 0xce, 0xc5, 0xc9, 0xd0, 0xd5, 0xd1, 0xca, 0xd8, 0xd5, 0xcc, 0xdd, 0xdd, 0xd7, 0xdf, 0xe0, 0xdc, 0xdc, 0xe1, 0xe0, 0xe7, 0xe3, 0xed, 0xee, 0xf7, 0xfd, 0xfd, 0x108, 0xfc, 0xfc, 0x107, 0xf6, 0x10c, 0x110, 0x107, 0x106, 0xf5, 0xf7, 0xf2, 0xf2, 0x109, 0x101, 0x107, 0x114, 0xf5, 0xff, 0x107, 0xff, 0x10f, 0x117, 0x10d, 0x10c, 0x103, 0x105, 0x10e, 0x110, 0x123, 0x121, 0x11d, 0x119, 0x11d, 0x11a, 0x11f, 0x11c, 0x119, 0x11c, 0x10f, 0x10f, 0x117, 0x112, 0x10f, 0x125, 0x117, 0x116, 0x125, 0x121, 0x122, 0x127, 0x122, 0x125, 0x113, 0x11b, 0x127, 0x111, 0x12e, 0x12d, 0x12a, 0x134, 0x12e, 0x12c, 0x12a, 0x12a, 0x12d, 0x13b, 0x133, 0x12c, 0x12e, 0x130, 0x124, 0x134, 0x136, 0x135, 0x12f, 0x137, 0x131, 0x12d, 0x133, 0x132, 0x13a, 0x137, 0x141, 0x143, 0x145, 0x148, 0x14d, 0x154, 0x15d, 0x159, 0x150, 0x15e, 0x14e, 0x150, 0x156, 0x152, 0x155, 0x155, 0x158, 0x154, 0x14a, 0x150, 0x141, 0x148, 0x14d, 0x153, 0x14e, 0x14d, 0x148, 0x141, 0x154, 0x152, 0x15c, 0x15e, 0x15d, 0x15e, 0x15e, 0x15b, 0x158, 0x15f, 0x163, 0x15d, 0x169, 0x167, 0x15a, 0x162, 0x164, 0x167, 0x15b, 0x161, 0x15f, 0x15c, 0x164, 0x169, 0x167, 0x169, 0x164, 0x16e, 0x16e, 0x15a, 0x175, 0x174, 0x16f, 0x17b, 0x16c, 0x167, 0x160, 0x166, 0x18b, 0x17f, 0x185, 0x196, 0x184, 0x187, 0x195, 0x192, 0x188, 0x188, 0x186, 0x182, 0x183, 0x179, 0x191, 0x190, 0x195, 0x19c, 0x1a0, 0x19e, 0x19a, 0x1a3, 0x1ae, 0x1a3, 0x196, 0x1a3, 0x197, 0x18e, 0x1b0, 0x1a7, 0x19a, 0x1af, 0x1a7, 0x1a7, 0x1bb, 0x1ae, 0x1a2, 0x1aa, 0x197, 0x193, 0x196, 0x196, 0x19c, 0x19a, 0x1a9, 0x1ad, 0x1a7, 0x1b6, 0x1be, 0x1ba, 0x1be, 0x1c4, 0x1b3, 0x1bf, 0x1cf, 0x1ab, 0x1ce, 0x1c2, 0x1ac, 0x1ce, 0x1be, 0x1b7, 0x1bc, 0x1bc, 0x1bc, 0x1bc, 0x1d6, 0x1d3, 0x1c3, 0x1c2, 0x1d2, 0x1d0, 0x1ce, 0x1f9, 0x1d8, 0x1cb, 0x1d6, 0x1ca, 0x1ca, 0x1da, 0x1d2, 0x1c8, 0x1df, 0x1c3, 0x1ce, 0x1d9, 0x1cb, 0x1be, 0x1e2, 0x1e1, 0x1be, 0x1db, 0x1c5, 0x1cd, 0x1cd, 0x1de, 0x1e8, 0x1cc, 0x1f7, 0x1e6, 0x1db, 0x1f9, 0x1d1, 0x1dc, 0x1e5, 0x1df, 0x1dd, 0x1be, 0x1f4, 0x1c4, 0x1df, 0x210, 0x1e6, 0x1fc, 0x1e1, 0x1ee, 0x1ed, 0x1cd, 0x1ec, 0x1f4, 0x1df, 0x1ed, 0x217, 0x21c, 0x20d, 0x23f, 0x22b, 0x223
};

uint32_t fft_wdata[512] = {
    0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, 0x00000008, 0x00000009, 0x0000000a, 0x0000000b, 0x0000000c, 0x0000000d, 0x0000000e, 0x0000000f, 0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, 0x00000018, 0x00000019, 0x0000001a, 0x0000001b, 0x0000001c, 0x0000001d, 0x0000001e, 0x0000001f, 0x00000020, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026, 0x00000027, 0x00000028, 0x00000029, 0x0000002a, 0x0000002b, 0x0000002c, 0x0000002d, 0x0000002e, 0x0000002f, 0x00000030, 0x00000031, 0x00000032, 0x00000033, 0x00000034, 0x00000035, 0x00000036, 0x00000037, 0x00000038, 0x00000039, 0x0000003a, 0x0000003b, 0x0000003c, 0x0000003d, 0x0000003e, 0x0000003f, 0x00000040, 0x00000041, 0x00000042, 0x00000043, 0x00000044, 0x00000045, 0x00000046, 0x00000047, 0x00000048, 0x00000049, 0x0000004a, 0x0000004b, 0x0000004c, 0x0000004d, 0x0000004e, 0x0000004f, 0x00000050, 0x00000051, 0x00000052, 0x00000053, 0x00000054, 0x00000055, 0x00000056, 0x00000057, 0x00000058, 0x00000059, 0x0000005a, 0x0000005b, 0x0000005c, 0x0000005d, 0x0000005e, 0x0000005f, 0x00000060, 0x00000061, 0x00000062, 0x00000063, 0x00000064, 0x00000065, 0x00000066, 0x00000067, 0x00000068, 0x00000069, 0x0000006a, 0x0000006b, 0x0000006c, 0x0000006d, 0x0000006e, 0x0000006f, 0x00000070, 0x00000071, 0x00000072, 0x00000073, 0x00000074, 0x00000075, 0x00000076, 0x00000077, 0x00000078, 0x00000079, 0x0000007a, 0x0000007b, 0x0000007c, 0x0000007d, 0x0000007e, 0x0000007f, 0x00000080, 0x00000081, 0x00000082, 0x00000083, 0x00000084, 0x00000085, 0x00000086, 0x00000087, 0x00000088, 0x00000089, 0x0000008a, 0x0000008b, 0x0000008c, 0x0000008d, 0x0000008e, 0x0000008f, 0x00000090, 0x00000091, 0x00000092, 0x00000093, 0x00000094, 0x00000095, 0x00000096, 0x00000097, 0x00000098, 0x00000099, 0x0000009a, 0x0000009b, 0x0000009c, 0x0000009d, 0x0000009e, 0x0000009f, 0x000000a0, 0x000000a1, 0x000000a2, 0x000000a3, 0x000000a4, 0x000000a5, 0x000000a6, 0x000000a7, 0x000000a8, 0x000000a9, 0x000000aa, 0x000000ab, 0x000000ac, 0x000000ad, 0x000000ae, 0x000000af, 0x000000b0, 0x000000b1, 0x000000b2, 0x000000b3, 0x000000b4, 0x000000b5, 0x000000b6, 0x000000b7, 0x000000b8, 0x000000b9, 0x000000ba, 0x000000bb, 0x000000bc, 0x000000bd, 0x000000be, 0x000000bf, 0x000000c0, 0x000000c1, 0x000000c2, 0x000000c3, 0x000000c4, 0x000000c5, 0x000000c6, 0x000000c7, 0x000000c8, 0x000000c9, 0x000000ca, 0x000000cb, 0x000000cc, 0x000000cd, 0x000000ce, 0x000000cf, 0x000000d0, 0x000000d1, 0x000000d2, 0x000000d3, 0x000000d4, 0x000000d5, 0x000000d6, 0x000000d7, 0x000000d8, 0x000000d9, 0x000000da, 0x000000db, 0x000000dc, 0x000000dd, 0x000000de, 0x000000df, 0x000000e0, 0x000000e1, 0x000000e2, 0x000000e3, 0x000000e4, 0x000000e5, 0x000000e6, 0x000000e7, 0x000000e8, 0x000000e9, 0x000000ea, 0x000000eb, 0x000000ec, 0x000000ed, 0x000000ee, 0x000000ef, 0x000000f0, 0x000000f1, 0x000000f2, 0x000000f3, 0x000000f4, 0x000000f5, 0x000000f6, 0x000000f7, 0x000000f8, 0x000000f9, 0x000000fa, 0x000000fb, 0x000000fc, 0x000000fd, 0x000000fe, 0x000000ff, 0x00000100, 0x00000101, 0x00000102, 0x00000103, 0x00000104, 0x00000105, 0x00000106, 0x00000107, 0x00000108, 0x00000109, 0x0000010a, 0x0000010b, 0x0000010c, 0x0000010d, 0x0000010e, 0x0000010f, 0x00000110, 0x00000111, 0x00000112, 0x00000113, 0x00000114, 0x00000115, 0x00000116, 0x00000117, 0x00000118, 0x00000119, 0x0000011a, 0x0000011b, 0x0000011c, 0x0000011d, 0x0000011e, 0x0000011f, 0x00000120, 0x00000121, 0x00000122, 0x00000123, 0x00000124, 0x00000125, 0x00000126, 0x00000127, 0x00000128, 0x00000129, 0x0000012a, 0x0000012b, 0x0000012c, 0x0000012d, 0x0000012e, 0x0000012f, 0x00000130, 0x00000131, 0x00000132, 0x00000133, 0x00000134, 0x00000135, 0x00000136, 0x00000137, 0x00000138, 0x00000139, 0x0000013a, 0x0000013b, 0x0000013c, 0x0000013d, 0x0000013e, 0x0000013f, 0x00000140, 0x00000141, 0x00000142, 0x00000143, 0x00000144, 0x00000145, 0x00000146, 0x00000147, 0x00000148, 0x00000149, 0x0000014a, 0x0000014b, 0x0000014c, 0x0000014d, 0x0000014e, 0x0000014f, 0x00000150, 0x00000151, 0x00000152, 0x00000153, 0x00000154, 0x00000155, 0x00000156, 0x00000157, 0x00000158, 0x00000159, 0x0000015a, 0x0000015b, 0x0000015c, 0x0000015d, 0x0000015e, 0x0000015f, 0x00000160, 0x00000161, 0x00000162, 0x00000163, 0x00000164, 0x00000165, 0x00000166, 0x00000167, 0x00000168, 0x00000169, 0x0000016a, 0x0000016b, 0x0000016c, 0x0000016d, 0x0000016e, 0x0000016f, 0x00000170, 0x00000171, 0x00000172, 0x00000173, 0x00000174, 0x00000175, 0x00000176, 0x00000177, 0x00000178, 0x00000179, 0x0000017a, 0x0000017b, 0x0000017c, 0x0000017d, 0x0000017e, 0x0000017f, 0x00000180, 0x00000181, 0x00000182, 0x00000183, 0x00000184, 0x00000185, 0x00000186, 0x00000187, 0x00000188, 0x00000189, 0x0000018a, 0x0000018b, 0x0000018c, 0x0000018d, 0x0000018e, 0x0000018f, 0x00000190, 0x00000191, 0x00000192, 0x00000193, 0x00000194, 0x00000195, 0x00000196, 0x00000197, 0x00000198, 0x00000199, 0x0000019a, 0x0000019b, 0x0000019c, 0x0000019d, 0x0000019e, 0x0000019f, 0x000001a0, 0x000001a1, 0x000001a2, 0x000001a3, 0x000001a4, 0x000001a5, 0x000001a6, 0x000001a7, 0x000001a8, 0x000001a9, 0x000001aa, 0x000001ab, 0x000001ac, 0x000001ad, 0x000001ae, 0x000001af, 0x000001b0, 0x000001b1, 0x000001b2, 0x000001b3, 0x000001b4, 0x000001b5, 0x000001b6, 0x000001b7, 0x000001b8, 0x000001b9, 0x000001ba, 0x000001bb, 0x000001bc, 0x000001bd, 0x000001be, 0x000001bf, 0x000001c0, 0x000001c1, 0x000001c2, 0x000001c3, 0x000001c4, 0x000001c5, 0x000001c6, 0x000001c7, 0x000001c8, 0x000001c9, 0x000001ca, 0x000001cb, 0x000001cc, 0x000001cd, 0x000001ce, 0x000001cf, 0x000001d0, 0x000001d1, 0x000001d2, 0x000001d3, 0x000001d4, 0x000001d5, 0x000001d6, 0x000001d7, 0x000001d8, 0x000001d9, 0x000001da, 0x000001db, 0x000001dc, 0x000001dd, 0x000001de, 0x000001df, 0x000001e0, 0x000001e1, 0x000001e2, 0x000001e3, 0x000001e4, 0x000001e5, 0x000001e6, 0x000001e7, 0x000001e8, 0x000001e9, 0x000001ea, 0x000001eb, 0x000001ec, 0x000001ed, 0x000001ee, 0x000001ef, 0x000001f0, 0x000001f1, 0x000001f2, 0x000001f3, 0x000001f4, 0x000001f5, 0x000001f6, 0x000001f7, 0x000001f8, 0x000001f9, 0x000001fa, 0x000001fb, 0x000001fc, 0x000001fd, 0x000001fe, 0x000001ff
};

uint32_t fft_odata[512] = {
    0x000000ff,0x00000000,0xfffffffd,0x00000051,0xffffffff,0x00000029,0xfffffffc,0x0000001c,0xfffffffe,0x00000014,0xfffffffe,0x00000010,0xffffffff,0x0000000f,0xfffffffe,0x0000000c,0x00000000,0x0000000a,0xffffffff,0x00000009,0xfffffffe,0x0000000a,0xffffffff,0x00000009,0xfffffffe,0x00000008,0xffffffff,0x00000007,0xffffffff,0x00000007,0xffffffff,0x00000007,0xffffffff,0x00000005,0xffffffff,0x00000007,0xfffffffe,0x00000006,0x00000000,0x00000006,0x00000000,0x00000006,0x00000000,0x00000006,0x00000000,0x00000006,0x00000000,0x00000006,0x00000000,0x00000004,0x00000000,0x00000004,0x00000000,0x00000004,0x00000000,0x00000004,0x00000000,0x00000004,0x00000000,0x00000004,0x00000000,0x00000004,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000002,0xffffffff,0x00000004,0xffffffff,0x00000004,0x00000000,0x00000004,0x00000001,0x00000003,0x00000001,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0xffffffff,0x00000003,0x00000000,0x00000003,0x00000000,0x00000003,0x00000000,0x00000003,0x00000000,0x00000003,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000001,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000001,0x00000000,0x00000002,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0xffffffff,0x00000002,0x00000000,0x00000001,0xffffffff,0x00000002,0xffffffff,0x00000002,0xffffffff,0x00000002,0x00000000,0x00000001,0xffffffff,0x00000002,0xffffffff,0x00000002,0xffffffff,0x00000002,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000002,0x00000000,0x00000002,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000000,0xffffffff,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0xffffffff,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xffffffff,0x00000001,0xffffffff,0x00000001,0xffffffff,0x00000001,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0xffffffff,0x00000000,0x00000000,0x00000000,0xffffffff,0x00000000,0xffffffff,0x00000000,0xffffffff,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000001,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000001,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000
};

uint32_t fbank_wdata[512] = {
    0x00000000, 0x00000000, 0xfffffffb, 0x00000000, 0xfffffff7, 0x0000000a, 0xfffffffe, 0x00000005, 0xfffffff9, 0x00000003, 0xfffffffd, 0x00000008, 0x00000007, 0xfffffffb, 0xffffffba, 0x0000000a, 0xfffff80f, 0x00000118, 0x00004514, 0xffffde7e, 0xffffc4cf, 0xfffff18e, 0xfffff336, 0x00004979, 0x000045ee, 0xffffc3cc, 0xffffbfec, 0xfffff985, 0xfffffe20, 0x00004461, 0x000041b1, 0xffffbd91, 0xffffbb18, 0x0000034d, 0x0000083c, 0x00003f0a, 0x00003c16, 0xffffb90a, 0xffffb74d, 0x00000d1a, 0x000011dc, 0x000038ee, 0x00003597, 0xffffb5dd, 0xffffb4bc, 0x0000167e, 0x00001afa, 0x00003214, 0x00002e6d, 0xffffb3e8, 0xffffb35e, 0x00001f4f, 0x0000237a, 0x00002aa4, 0x000026c4, 0xffffb31c, 0xffffb322, 0x00002777, 0x00002b45, 0x000022c9, 0x00001ebf, 0xffffb369, 0xffffb3f2, 0x00002edf, 0x00003248, 0x00001aaa, 0x0000168b, 0xffffb4b6, 0xffffb5b9, 0x0000357a, 0x00003878, 0x00001268, 0x00000e45, 0xffffb6ef, 0xffffb859, 0x00003b42, 0x00003dd4, 0x00000a26, 0x0000060e, 0xffffb9f4, 0xffffbbbc, 0x0000402f, 0x00004252, 0x00000201, 0xfffffe00, 0xffffbdb0, 0xffffbfc7, 0x00004443, 0x000045fd, 0xfffffa11, 0xfffff634, 0xffffc201, 0xffffc45a, 0x00004784, 0x000048d8, 0xfffff26b, 0xffffeeba, 0xffffc6d2, 0xffffc961, 0x000049f8, 0x00004aeb, 0xffffeb22, 0xffffe7a3, 0xffffcc05, 0xffffcebd, 0x00004bae, 0x00004c45, 0xffffe442, 0xffffe0fe, 0xffffd183, 0xffffd458, 0x00004cae, 0x00004cee, 0xffffddd7, 0xffffdace, 0xffffd738, 0xffffda1d, 0x00004d0a, 0x00004cfb, 0xffffd7e7, 0xffffd51f, 0xffffdd0a, 0xffffdff9, 0x00004cc9, 0x00004c78, 0xffffd276, 0xffffcfee, 0xffffe2ea, 0xffffe5d7, 0x00004c06, 0x00004b78, 0xffffcd86, 0xffffcb3f, 0xffffe8c3, 0xffffebaa, 0x00004aca, 0x00004a04, 0xffffc918, 0xffffc70e, 0xffffee8c, 0xfffff164, 0x00004927, 0x00004836, 0xffffc524, 0xffffc35a, 0xfffff431, 0xfffff6f7, 0x0000472f, 0x00004614, 0xffffc1ac, 0xffffc01c, 0xfffff9b0, 0xfffffc5a, 0x000044ec, 0x000043b4, 0xffffbea8, 0xffffbd4f, 0xfffffef9, 0x00000188, 0x0000426f, 0x00004121, 0xffffbc10, 0xffffbaed, 0x00000407, 0x00000678, 0x00003fc7, 0x00003e67, 0xffffb9e0, 0xffffb8eb, 0x000008d6, 0x00000b24, 0x00003d02, 0x00003b95, 0xffffb80e, 0xffffb743, 0x00000d62, 0x00000f8c, 0x00003a27, 0x000038b5, 0xffffb690, 0xffffb5ef, 0x000011a5, 0x000013ad, 0x00003743, 0x000035cf, 0xffffb55f, 0xffffb4e3, 0x000015a2, 0x00001785, 0x0000345f, 0x000032f0, 0xffffb475, 0xffffb416, 0x00001957, 0x00001b16, 0x00003184, 0x0000301e, 0xffffb3c6, 0xffffb381, 0x00001cc3, 0x00001e60, 0x00002ebc, 0x00002d5e, 0xffffb349, 0xffffb31c, 0x00001fea, 0x00002162, 0x00002c09, 0x00002abb, 0xffffb2fd, 0xffffb2e4, 0x000022c9, 0x0000241f, 0x00002975, 0x00002839, 0xffffb2d1, 0xffffb2c9, 0x00002566, 0x0000269b, 0x00002704, 0x000025d9, 0xffffb2c7, 0xffffb2cb, 0x000027c0, 0x000028d6, 0x000024b9, 0x000023a4, 0xffffb2d3, 0xffffb2de, 0x000029dd, 0x00002ad4, 0x0000229a, 0x0000219c, 0xffffb2ee, 0xffffb302, 0x00002bbc, 0x00002c96, 0x000020aa, 0x00001fc2, 0xffffb317, 0xffffb330, 0x00002d61, 0x00002e1f, 0x00001ee8, 0x00001e1a, 0xffffb349, 0xffffb362, 0x00002ecf, 0x00002f71, 0x00001d5a, 0x00001ca8, 0xffffb37b, 0xffffb394, 0x00003007, 0x00003091, 0x00001c00, 0x00001b67, 0xffffb3ad, 0xffffb3c4, 0x0000310c, 0x0000317b, 0x00001add, 0x00001a60, 0xffffb3db, 0xffffb3ee, 0x000031e0, 0x00003238, 0x000019f0, 0x0000198e, 0xffffb402, 0xffffb411, 0x00003283, 0x000032c4, 0x0000193b, 0x000018f6, 0xffffb41f, 0xffffb42b, 0x000032f8, 0x00003322, 0x000018bf, 0x00001896, 0xffffb431, 0xffffb436, 0x00003340, 0x00003353, 0x0000187d, 0x00001871, 0xffffb438, 0xffffb438, 0x00003359, 0x00003353, 0x00001873, 0x00001884, 0xffffb435, 0xffffb42c, 0x00003345, 0x00003329, 0x000018a3, 0x000018d0, 0xffffb423, 0xffffb417, 0x00003304, 0x000032d1, 0x0000190a, 0x00001954, 0xffffb408, 0xffffb3f7, 0x00003295, 0x0000324c, 0x000019aa, 0x00001a11, 0xffffb3e2, 0xffffb3cc, 0x000031f6, 0x00003196, 0x00001a86, 0x00001b07, 0xffffb3b3, 0xffffb39a, 0x00003129, 0x000030b0, 0x00001b97, 0x00001c34, 0xffffb37f, 0xffffb363, 0x00003029, 0x00002f97, 0x00001cde, 0x00001d97, 0xffffb347, 0xffffb329, 0x00002ef6, 0x00002e49, 0x00001e5c, 0x00001f2e, 0xffffb30f, 0xffffb2f4, 0x00002d8d, 0x00002cc5, 0x0000200d, 0x000020f9, 0xffffb2d9, 0xffffb2c2, 0x00002bed, 0x00002b07, 0x000021f0, 0x000022f3, 0xffffb2af, 0xffffb29d, 0x00002a12, 0x0000290d, 0x00002403, 0x0000251d, 0xffffb290, 0xffffb286, 0x000027fb, 0x000026d7, 0x00002642, 0x00002771, 0xffffb284, 0xffffb288, 0x000025a3, 0x0000245f, 0x000028aa, 0x000029ec, 0xffffb291, 0xffffb2a6, 0x00002309, 0x000021a3, 0x00002b37, 0x00002c89, 0xffffb2c1, 0xffffb2e4, 0x0000202e, 0x00001ea5, 0x00002de4, 0x00002f44, 0xffffb316, 0xffffb351, 0x00001d0a, 0x00001b5d, 0x000030aa, 0x00003216, 0xffffb39b, 0xffffb3ef, 0x0000199f, 0x000017ce, 0x00003386, 0x000034fa, 0xffffb454, 0xffffb4c8, 0x000015ea, 0x000013f3, 0x00003670, 0x000037e5, 0xffffb550, 0xffffb5e6, 0x000011ed, 0x00000fd2, 0x0000395d, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000
};

uint32_t fbank_rdata[10] = {
    0x40404040, 0x40404040, 0x40404040, 0x40404040, 0x40404040, 0x51404040, 0x42517576, 0x40404040, 0x57766440, 0x40404040
};


volatile Bool fft_interrupt_flag = FALSE; 

void FFT_IRQHandler(void);
static void ifft_config(void);
static void fft_config(void);
static void fbank_config(void);
static void system_clock_init(void);
static void uart_init(void);

void main(void)
{
    printf_output_redirect_set(PRINTF_RETARGET_NONE);

    /* Reset all peripherals except PMU */
    RCC_Peri_Rst(0xFFFFFFFF & (~(RCC_PMU_PRSTN | RCC_GPIO_RSTN)));

    /* Enable N307 Interrupt */
    __enable_irq();
    __enable_mcycle_counter();
  
    printf_output_redirect_set(PRINTF_RETARGET_SEGGER);
  
    /* Initial clock */
    system_clock_init();

    /* Initial periphral */
    uart_init();
    printf_output_redirect_set(PRINTF_RETARGET_UART0);

    /* Show message */
    printf("BUILD: %s %s \r\n", __DATE__, __TIME__);

    /* periphral config */
    fft_config();
    ifft_config();
    fbank_config();

    /* Demo complete */
    printf("Demo complete \r\n");

    while(1){};
}


void FFT_IRQHandler(void)
{
    FBANK_Clear_Interrupt_Cmd(FBANK,FBANK_INT);
    fft_interrupt_flag = TRUE;
}

static void uart_init(void)
{
    /*init uart*/
    UART_InitTypeDef USART_InitStructure;
    GPIO_InitTypeDef GPIO_InitStructure;
    RCC_CLK_EN_Ctl(RCC_UART0_CLKEN,ENABLE);
   
    GPIO_InitStructure.Pin = GPIO_PIN_16 | GPIO_PIN_17;
    GPIO_InitStructure.Alternate = GPIO_AF16_UART0 | GPIO_AF17_UART0;
    GPIO_Init(GPIOA, &GPIO_InitStructure);
  
    USART_InitStructure.BaudRate = 9600;
    USART_InitStructure.Parity = UART_PARITY_NONE;
    USART_InitStructure.StopBits = UART_STOPBITS_1;
    USART_InitStructure.WordLength = UART_WORDLENGTH_8B;
    USART_InitStructure.Mode = UART_MODE_UART;
    USART_InitStructure.FIFOCtl = DISABLE;
    UART_Init(UART0, &USART_InitStructure);
}

static void ifft_config(void)
{
    uint32_t temp[512] = {0};  

    RCC_CLK_EN_Ctl(RCC_FFT_CLKEN,ENABLE);

    memset(temp,0,512*4);

    ECLIC_ClearPendingIRQ(FBANK_IRQn);  
    ECLIC_SetPriorityIRQ(FBANK_IRQn, 1);
    ECLIC_SetTrigIRQ(FBANK_IRQn, ECLIC_POSTIVE_EDGE_TRIGGER);
    ECLIC_EnableIRQ(FBANK_IRQn);

    FBANK_Set_Interrupt_Cmd(FBANK,FBANK_INT,ENABLE);
    
    FBANK_Ctl_Cmd(FBANK, 0xffff, DISABLE);
    FBANK_Ctl_Cmd(FBANK, DO_CFFT_HCLK | DO_BITREVERSE | IFFT_ENABLE, ENABLE);
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, ENABLE);
    FBANK_Ctl_Cmd(FBANK, SRAM_ADDR_SEL, DISABLE);
    FBANK_Write_Sram_Data(FBANK, ifft_wdata, 512);
    
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, DISABLE);
    FBANK_Enable_Cmd(FBANK, ENABLE);
    while(!fft_interrupt_flag);
    fft_interrupt_flag = FALSE;
    
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, ENABLE);
    FBANK_Read_Sram_Data(FBANK, temp, 512);  

    ECLIC_ClearPendingIRQ(FBANK_IRQn);  
    ECLIC_DisableIRQ(FBANK_IRQn);

    for (int i = 0 ;i<512;i++)
    {
        if(ifft_odata[i] != temp[i])
        {
            printf("ifft error \r\n");
        }
    }
    printf("ifft success \r\n");
}

static void fft_config(void)
{
    uint32_t temp[512] = {0};  

    RCC_CLK_EN_Ctl(RCC_FFT_CLKEN,ENABLE);

    memset(temp,0,10*4);

    ECLIC_ClearPendingIRQ(FBANK_IRQn);  
    ECLIC_SetPriorityIRQ(FBANK_IRQn, 1);
    ECLIC_SetTrigIRQ(FBANK_IRQn, ECLIC_POSTIVE_EDGE_TRIGGER);
    ECLIC_EnableIRQ(FBANK_IRQn);

    FBANK_Set_Interrupt_Cmd(FBANK,FBANK_INT,ENABLE);
    
    FBANK_Ctl_Cmd(FBANK, 0xffff, DISABLE);
    FBANK_Ctl_Cmd(FBANK, DO_RFFT_HCLK | DO_CFFT_HCLK | FFT_ENABLE, ENABLE);
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, ENABLE);
    FBANK_Ctl_Cmd(FBANK, SRAM_ADDR_SEL, ENABLE);
    FBANK_Write_Sram_Data(FBANK, fft_wdata, 512);
    
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, DISABLE);
    FBANK_Enable_Cmd(FBANK, ENABLE);
    while(!fft_interrupt_flag);
    fft_interrupt_flag = FALSE;
    
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, ENABLE);
    FBANK_Ctl_Cmd(FBANK, SRAM_ADDR_SEL, DISABLE);
    FBANK_Read_Sram_Data(FBANK, temp, 512);  

    ECLIC_ClearPendingIRQ(FBANK_IRQn);  
    ECLIC_DisableIRQ(FBANK_IRQn);

    for (int i = 0 ;i<512;i++)
    {
        if(fft_odata[i] != temp[i])
        {
            printf("fft error \r\n");
        }
    }
    printf("fft success \r\n");
}

static void fbank_config(void)
{
    uint32_t temp[100] = {0};  

    RCC_CLK_EN_Ctl(RCC_FFT_CLKEN,ENABLE);

    memset(temp,0,100*4);

    ECLIC_ClearPendingIRQ(FBANK_IRQn);  
    ECLIC_SetPriorityIRQ(FBANK_IRQn, 1);
    ECLIC_SetTrigIRQ(FBANK_IRQn, ECLIC_POSTIVE_EDGE_TRIGGER);
    ECLIC_EnableIRQ(FBANK_IRQn);

    FBANK_Set_Interrupt_Cmd(FBANK,FBANK_INT,ENABLE);
    
    FBANK_Ctl_Cmd(FBANK, 0xffff, DISABLE);
    FBANK_Ctl_Cmd(FBANK, DO_CFFT_HCLK | DO_RFFT_HCLK | DO_WINDOW | DO_BITREVERSE | LOG_ENABLE | SQRT_ENABLE | MELFILTER_ENABLE | FFT_ENABLE, ENABLE);
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, ENABLE);
    FBANK_Ctl_Cmd(FBANK, SRAM_ADDR_SEL, DISABLE);
    FBANK_Write_Sram_Data(FBANK, fbank_wdata, 512);
    
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, DISABLE);
    FBANK_Enable_Cmd(FBANK, ENABLE);
    while(!fft_interrupt_flag);
    fft_interrupt_flag = FALSE;
    
    FBANK_Ctl_Cmd(FBANK, DATA_SRAM_SEL, ENABLE);
    FBANK_Read_Sram_Data(FBANK, temp, 10);  

    ECLIC_ClearPendingIRQ(FBANK_IRQn);  
    ECLIC_DisableIRQ(FBANK_IRQn);

    for (volatile int i = 0 ;i<10;i++)
    {
        if(fbank_rdata[i] != temp[i])
        {
            printf("fbank error \r\n");
        }
    }
    printf("fbank success \r\n");
}

static void system_clock_init(void)
{
    int ret = 0; 
    /* The clock instance */
    Hal_Clock_InitTypeDef* hal_clock_instance = hal_clock_instance_get();
    Hal_Clock_24mosc_Configuration hal_clock_24mosc_Configuration;

    /* Construct 24mosc related configuration parameters */
    hal_clock_24mosc_Configuration.use_24mosc_way = HAL_CLOCK_24MOSC_INTERNAL;
    hal_clock_24mosc_Configuration.clock_hz = 24576000;
    hal_clock_24mosc_Configuration.clock_divider = 1;
    hal_clock_24mosc_Configuration.internal_24mosc_calibration_flag = ENABLE;
    hal_clock_24mosc_Configuration.calibration_way = HAL_CLOCK_24MOSC_USE_32KOSC_CALIBRATION_PARAMETER;

    /* Initialize the clock instance.the system clock is from internal 24mosc.the 24mosc is calibrated by the xtal 32k */
    ret = hal_clock_init(hal_clock_instance,HAL_CLOCK_24MOSC,HAL_CLOCK_24MOSC,&hal_clock_24mosc_Configuration,0,1,1);
    if(ret <= 0)
    {
        printf("hal_clock_init error:%d\r\n", ret);
    }

    /* According to the clock instance, initialize the hardware */
    ret = hal_clock_open(hal_clock_instance);
    if(ret <= 0)
    {
        printf("hal_clock_init error:%d\r\n", ret);
    }
}
